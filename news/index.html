<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • tidywater</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://BrownandCaldwell-Public.github.io/tidywater/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidywater</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidywater.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/coeff_fitting_chemdose_dbp.html">Fitting and using custom coefficients in chemdose_dbp</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_blend_waters.html">Blending Multiple Waters</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_chemdose_ph.html">Helper Functions &amp; Dose Chemicals</a></li>
    <li><a class="dropdown-item" href="../articles/intro.html">Introduction to tidywater: Basic functions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BrownandCaldwell-Public/tidywater/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/BrownandCaldwell-Public/tidywater/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.10.0" id="tidywater-0100">tidywater 0.10.0<a class="anchor" aria-label="anchor" href="#tidywater-0100"></a></h2><p class="text-muted">CRAN release: 2025-08-24</p>
<div class="section level3">
<h3 id="new-features-0-10-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-10-0"></a></h3>
<ul><li>Revamped helpers <code>_df</code> replace <code>chain</code> and <code>once</code> functions. Use <code>pluck_cols = TRUE</code> to mimic <code>once</code> behavior, although it will always return a water column as well.</li>
<li>Virus log removal added to <code>solvect_chlorine</code> based on the EPA Guidance Manual Table E-7 (1991)</li>
<li>
<code>modify_water</code> can now modify multiple water slots at once. Note that in order to modify multiple slots using <code>modify_water_df</code>, all input arguments must be included as a list.</li>
<li>Acetic acid added as chemical to <code>chemdose_ph</code>. In addition to changing pH, dosing acetic acid will also update TOC and DOC of the input water.</li>
<li>
<code>regulate_toc</code> now available for calculating TOC removal compliance</li>
<li>
<code>gacrun_toc</code>, <code>gac_toc</code>, and <code>gacbv_toc</code> added to predict TOC removal from GAC treatment using either the EPA WTP model (2001) or the Zachman and Summers (2018) model. Different functions provide different output types: a data frame of the TOC breakthrough curve, a new water with updated TOC, DOC, and UV254 water slots, or the necessary bed volumes to stay below the target effluent TOC. See individual functions for documentation.</li>
<li>
<code>pluck_water</code> and <code>_df</code> helpers sped up by relying on base R instead of purrr</li>
<li>
<code>chemdose_toc</code> can now account for doc removal due to lime softening from the WTP Model (2001). To implement, use the <code>caoh2</code> argument.</li>
<li>New model <code>opensys_ph</code> added to predict pH and alkalinity of an input water in an open carbonate system at equilibrium</li>
<li>New function <code>plot_lead</code> added to graph the pH vs DIC contour plot for lead solubility</li>
<li>Alkalinity slots added to the water class. <code>alk</code> and <code>alk_eq</code> represent the total alkalinity, and individual alkalinities due to carbonate, phosphate, ammonium, borate, silicate, and hypochlorite have been added as individual slots (eg. carbonate_alk_eq).</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-10-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-10-0"></a></h3>
<ul><li>
<code>_chain</code> and <code>_once</code> functions have been deprecated. Replace with <code>_df</code> functions. Code should be similar, but has slightly different outputs.</li>
<li>Default water naming in helper functions has been shortened to remove “_water”. Eg, new default <code>output_water = "defined"</code>, old default <code>output_water = "defined_water"</code>. See function documentation for new defaults.</li>
<li>Total alkalinity (<code>alk</code>) now accounts for phosphate, silicate, borate, hypochlorite, and ammonia. Could have a minor impact on final pH and alkalinity calculations in waters with those compounds.</li>
<li>Now depends on R &gt;= 4.1.0 for built in pipe operator, <code>|&gt;</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.9.0" id="tidywater-090">tidywater 0.9.0<a class="anchor" aria-label="anchor" href="#tidywater-090"></a></h2><p class="text-muted">CRAN release: 2025-07-03</p>
<div class="section level3">
<h3 id="new-features-0-9-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-9-0"></a></h3>
<ul><li>New <code>chemdose_ph</code> chemicals: CaOCl2, CaSO4, HNO3, KMnO4, NaF, and Na3PO4</li>
<li>New model <code>dissolve_cu</code> predicts the concentration of copper given pH, DIC, and phosphate based on the empirical model described in Lytle et al. (2018). <code>dissolve_cu_once</code> can also predict copper for waters in a data frame.</li>
<li>
<code>chemdose_dbp</code> can now input custom fitting coefficients as a data frame</li>
<li>
<code>chemdose_ph_once</code> and <code>chemdose_toc_once</code> are back and only return relevant waters slots in its output.</li>
<li>
<code>decarbonate_ph</code>: function to remove CO2 (H2CO3) from a water and determine the new pH (and division of ions)</li>
<li>
<code>modify_water</code>: function to modify individual slots in a water that handles unit conversions</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-9-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-9-0"></a></h3>
<ul><li>
<code>applied_treatment</code> slot removed from water. Was not providing any benefit and added complexity. Should be the responsibility of the user to track.</li>
<li>
<code>h2co3</code> slot added to <code>water</code> class calculated based on {H} and total carbonate.</li>
<li>
<code>chemdose_ph</code> warns when ion water slots aren’t updated due to NA slots.</li>
<li>
<code>solvedose_ph</code> updated search range to allow for more water qualities without erroring. Updated search process results in slightly different outputs.</li>
<li>
<code>_toc</code> functions are DOC-based and previously assumed no particulate TOC removal. In reality, virtually all particulate TOC is removed with other particulates, so models have been updated to return TOC = DOC</li>
<li>
<code>chemdose_toc</code> custom coeff now accepts a data frame instead of a named list</li>
<li>Corrosion index slots removed from <code>water</code> class.</li>
<li>
<code>calculate_corrosion</code> now outputs a data frame with the corrosion indices as columns. <code>calculate_corrosion_chain</code> removed because the base function has a numeric output.</li>
<li>
<code>calculate_corrosion</code> updated CCPP search range to allow for more water qualities without erroring.</li>
<li>
<code>solvect_o3</code> and <code>solveresid_o3</code> now return zero instead of NaN when the input dose is zero</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.2" id="tidywater-082">tidywater 0.8.2<a class="anchor" aria-label="anchor" href="#tidywater-082"></a></h2><p class="text-muted">CRAN release: 2025-05-17</p>
<ul><li>Reduce examples for CRAN speed again.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.1" id="tidywater-081">tidywater 0.8.1<a class="anchor" aria-label="anchor" href="#tidywater-081"></a></h2>
<ul><li>Pare down examples and vignettes to speed up CRAN checks</li>
<li>Minor updates to <code>chemdose_chloramine</code> warnings.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.0" id="tidywater-080">tidywater 0.8.0<a class="anchor" aria-label="anchor" href="#tidywater-080"></a></h2>
<ul><li>
<code>calculate_corrosion</code> expanded CCPP search range (fewer errors)</li>
</ul><div class="section level3">
<h3 id="breaking-changes-0-8-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-8-0"></a></h3>
<ul><li>Helper function (<code>_chain</code> and <code>_once</code>) behavior change: can now specify column name unquoted (eg, alum = AlumDose)</li>
<li>Removed most (<code>_once</code>) helper functions because the desired output is almost never all water slots as columns. Refer to <code>pluck_water(parameter = "all")</code> for same behavior.</li>
<li>
<code>pac_toc</code> now constrained to accept a smaller range of doses and times. The form of the equation was allowing negative TOC outputs.</li>
<li>
<code>define_water</code>, <code>chemdose_ph</code>, <code>blend_waters</code>, and other pH related functions slightly impacted by a fix in concentration vs activity. Previous code assumed pH = 10^-[H+], code has been corrected to pH = 10^-{H+}</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-8-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-8-0"></a></h3>
<ul><li>User may now choose which cation or anion to use for balancing ions</li>
<li>dic now calculated in <code>define_water</code>
</li>
<li>dic now available in <code>convert_units</code>
</li>
<li>
<code>chemdose_chloramine</code>: chloramine formation model given chlorine, ammonia, time</li>
<li>
<code>chemdose_chlordecay</code> now has argument, <code>use_chlorine_slot</code>. Function can now use chlorine dose and/or free_chlorine or combined_chlorine slots.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.0" id="tidywater-070">tidywater 0.7.0<a class="anchor" aria-label="anchor" href="#tidywater-070"></a></h2><p class="text-muted">CRAN release: 2025-01-22</p>
<div class="section level3">
<h3 id="new-features-0-7-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-7-0"></a></h3>
<ul><li>chlorine and chloramine decay: <code>chemdose_chlordecay</code>
</li>
<li>New water slots for chloramine chemistry: <code>combined_chlorine</code>, <code>nh2cl</code>, <code>nhcl2</code>, <code>ncl3</code>
</li>
<li>
<code>solvemass_solids</code> separates functionality from <code>solvecost_solids</code> to solve lb/day</li>
<li>
<code>biofilter_toc</code>, <code>chemdose_chlordecay</code>, <code>ozonate_bromate</code>, and <code>solvect</code> helpers now available.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-7-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-7-0"></a></h3>
<ul><li>
<code>chemdose_ct</code> renamed <code>solvect_chlorine</code>
</li>
<li>
<code>ozonate_ct</code> renamed <code>solvect_o3</code>
</li>
<li>
<code>tot_ocl</code> slot in water renamed <code>free_chlorine</code>
</li>
<li>
<code>define_water</code> argument changes: <code>tot_ocl</code> changed to <code>free_chlorine</code>, added <code>combined_chlorine</code>
</li>
<li>Helper function (<code>_chain</code> and <code>_once</code>) behavior change: if multiple values are specified for multiple arguments, all combinations are used.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.2" id="tidywater-062">tidywater 0.6.2<a class="anchor" aria-label="anchor" href="#tidywater-062"></a></h2><p class="text-muted">CRAN release: 2024-11-05</p>
<ul><li>CRAN resubmission.</li>
<li>Minor changes to DESCRIPTION and examples using <code>plan</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.1" id="tidywater-061">tidywater 0.6.1<a class="anchor" aria-label="anchor" href="#tidywater-061"></a></h2>
<ul><li>Initial CRAN submission.</li>
<li>Fix R CMD check notes</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.0" id="tidywater-060">tidywater 0.6.0<a class="anchor" aria-label="anchor" href="#tidywater-060"></a></h2>
<div class="section level3">
<h3 id="new-features-0-6-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-6-0"></a></h3>
<ul><li>biofilter_toc updates the bdoc water slot</li>
<li>pac_toc helper functions _chain and _once</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-6-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-6-0"></a></h3>
<ul><li>biofilter_toc argument, o3_dose, was replaced with ozonated, which accepts TRUE or FALSE inputs</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="tidywater-050">tidywater 0.5.0<a class="anchor" aria-label="anchor" href="#tidywater-050"></a></h2>
<div class="section level3">
<h3 id="fixes-0-5-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-0-5-0"></a></h3>
<ul><li>default temperature is now 25C</li>
<li>corrected enthalpy of reaction for ammonium ion</li>
<li>completed PAC models</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-5-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-5-0"></a></h3>
<ul><li>chemdose_ct: CT calculations, including CT actual, CT required, and giardia log removal</li>
<li>solvecost_ family: cost calculations, including chemicals, power, solids, and labor</li>
<li>solvemass_ :convert chemical doses from mg/L to lb/day</li>
<li>solveresid_o3: ozone decay model and corresponding helper function from WTP model</li>
<li>ozonate_ct: ozone CT model</li>
<li>validate water function, not exported but useful for function writing</li>
<li>chemdose_f: fluoride model for alum addition. Requires site specific fitting.</li>
<li>biofilter_toc: biofiltration model (Terry &amp; Summers)</li>
<li>added ACH to chemdose_ph</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-5-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-5-0"></a></h3>
<ul><li>total ammonia water slot changed from tot_nh4 to tot_nh3</li>
</ul></div>
<div class="section level3">
<h3 id="code-structure-changes-0-5-0">Code structure changes<a class="anchor" aria-label="anchor" href="#code-structure-changes-0-5-0"></a></h3>
<ul><li>renamed and rearranged R scripts to better find functions and associated helper functions</li>
<li>update most functions to use base R, and only use dplyr functions where necessary (increase speed)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="tidywater-040">tidywater 0.4.0<a class="anchor" aria-label="anchor" href="#tidywater-040"></a></h2>
<div class="section level3">
<h3 id="fixes-0-4-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-0-4-0"></a></h3>
<ul><li>solve_ph code updated to handle starting po4 concentration</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-4-0"></a></h3>
<ul><li>convert_watermg for cleaner water exports</li>
<li>bromate formation models</li>
<li>ammonia in pH chemistry</li>
<li>new water slots for F, Fe, Al, etc</li>
<li>helper functions for chemdose_dbp</li>
<li>PAC models (incomplete)</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-4-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-4-0"></a></h3>
<ul><li>treatment slot renamed “applied_treatments”</li>
<li>solve_ph changes. Should only see different values when po4 is in the water.</li>
<li>Added hydration to ferric sulfate and renamed coagulants for consistency.</li>
<li>pluck_water doesn’t allow specification of output_column. It is named by default from the input and parameters. Improved pluck does allow multiple parameters and waters in one function.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="tidywater-030">tidywater 0.3.0<a class="anchor" aria-label="anchor" href="#tidywater-030"></a></h2>
<div class="section level3">
<h3 id="fixes-0-3-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-0-3-0"></a></h3>
<ul><li>Raw water DBP models do not require UVA</li>
<li>Updated incorrect DBP model coefficients</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-3-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-0"></a></h3>
<ul><li>CaCl2 now included in possible chemical addition.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-3-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-0"></a></h3>
<ul><li>
<code>define_water</code> now has arguments for “ca” and “mg” and no longer has “ca_hard”.</li>
<li>
<code>summarize_dbp</code> and <code>summarize_corrosion</code> removed. <code>summarize_wq</code> now takes arguments to summarize general, ions, dbps, or corrosion</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="tidywater-021">tidywater 0.2.1<a class="anchor" aria-label="anchor" href="#tidywater-021"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-2-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-1"></a></h3>
<ul><li>Small vignette changes to fix package build.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="tidywater-020">tidywater 0.2.0<a class="anchor" aria-label="anchor" href="#tidywater-020"></a></h2>
<div class="section level3">
<h3 id="new-features-0-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0"></a></h3>
<ul><li>TOC removal through coagulation, <code>chemdose_toc</code> and matching <code>_chain</code> and <code>_once</code> helper functions.</li>
<li>DBP formation from coagulation, <code>chemdose_dbp</code>. No helper functions yet except <code>summarise_dbp</code>
</li>
<li>Calculation of corrosion indices, <code>calculate_corrosion</code> and <code>summarise_corrosion</code> with helper functions.</li>
<li>Theoretical lead solubility <code>dissolve_pb</code> with helper functions.</li>
<li>Helper function <code>pluck_water</code> to pull one slot from a <code>water</code> column in a data frame.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-2-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0"></a></h3>
<ul><li>Changes in S4 <code>water</code> class and <code>define_water</code> to handle more water quality parameters.</li>
</ul></div>
<div class="section level3">
<h3 id="calculation-changes-0-2-0">Calculation changes<a class="anchor" aria-label="anchor" href="#calculation-changes-0-2-0"></a></h3>
<ul><li>Activity is calculated from ionic strength and used in pH calculations.</li>
<li>Ionic strength is based on TDS or conductivity and is recalculated when appropriate in <code>balance_ions</code> and <code>chemdose_ph</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="tidywater-010">tidywater 0.1.0<a class="anchor" aria-label="anchor" href="#tidywater-010"></a></h2>
<ul><li>Initial release</li>
<li>Acid/base equilibrium with assumption activity = concentration</li>
<li>Helper functions <code>_chain</code> and <code>_once</code> for applying models to data frames.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sierra Johnson, Libby McKenna, Riley Mulhern, Chris Corwin, Brown and Caldwell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

