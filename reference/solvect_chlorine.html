<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Determine disinfection credit from chlorine. — solvect_chlorine • tidywater</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Determine disinfection credit from chlorine. — solvect_chlorine"><meta name="description" content='This function takes a water defined by define_water and other disinfection parameters
and outputs a data frame of the required CT (ct_required), actual CT (ct_actual), and giardia log removal (glog_removal).
For a single water, use solvect_chlorine; to apply the model to a dataframe, use solvect_chlorine_df.
For most arguments, the _df helpers
"use_col" default looks for a column of the same name in the dataframe. The argument can be specified directly in the
function instead or an unquoted column name can be provided.'><meta property="og:description" content='This function takes a water defined by define_water and other disinfection parameters
and outputs a data frame of the required CT (ct_required), actual CT (ct_actual), and giardia log removal (glog_removal).
For a single water, use solvect_chlorine; to apply the model to a dataframe, use solvect_chlorine_df.
For most arguments, the _df helpers
"use_col" default looks for a column of the same name in the dataframe. The argument can be specified directly in the
function instead or an unquoted column name can be provided.'><meta property="og:image" content="https://BrownandCaldwell-Public.github.io/tidywater/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidywater</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidywater.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/coeff_fitting_chemdose_dbp.html">Fitting and using custom coefficients in chemdose_dbp</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_blend_waters.html">Blending Multiple Waters</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_chemdose_ph.html">Helper Functions &amp; Dose Chemicals</a></li>
    <li><a class="dropdown-item" href="../articles/intro.html">Introduction to tidywater: Basic functions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BrownandCaldwell-Public/tidywater/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Determine disinfection credit from chlorine.</h1>
      <small class="dont-index">Source: <a href="https://github.com/BrownandCaldwell-Public/tidywater/blob/main/R/solvect_chlorine.R" class="external-link"><code>R/solvect_chlorine.R</code></a></small>
      <div class="d-none name"><code>solvect_chlorine.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes a water defined by <a href="define_water.html">define_water</a> and other disinfection parameters
and outputs a data frame of the required CT (<code>ct_required</code>), actual CT (<code>ct_actual</code>), and giardia log removal (<code>glog_removal</code>).
For a single water, use <code>solvect_chlorine</code>; to apply the model to a dataframe, use <code>solvect_chlorine_df</code>.
For most arguments, the <code>_df</code> helpers
"use_col" default looks for a column of the same name in the dataframe. The argument can be specified directly in the
function instead or an unquoted column name can be provided.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">solvect_chlorine</span><span class="op">(</span><span class="va">water</span>, <span class="va">time</span>, <span class="va">residual</span>, <span class="va">baffle</span>, free_cl_slot <span class="op">=</span> <span class="st">"residual_only"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">solvect_chlorine_df</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  input_water <span class="op">=</span> <span class="st">"defined"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"use_col"</span>,</span>
<span>  residual <span class="op">=</span> <span class="st">"use_col"</span>,</span>
<span>  baffle <span class="op">=</span> <span class="st">"use_col"</span>,</span>
<span>  free_cl_slot <span class="op">=</span> <span class="st">"residual_only"</span>,</span>
<span>  water_prefix <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>Smith et al. (1995)</p>
<p>USEPA (2020)</p>
<p>USEPA (1991)</p>
<p>See references list at: <a href="https://github.com/BrownandCaldwell-Public/tidywater/wiki/References" class="external-link">https://github.com/BrownandCaldwell-Public/tidywater/wiki/References</a></p>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-water">water<a class="anchor" aria-label="anchor" href="#arg-water"></a></dt>
<dd><p>Source water object of class "water" created by <code><a href="define_water.html">define_water</a></code>. Water must include ph and temp</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>Retention time of disinfection segment in minutes.</p></dd>


<dt id="arg-residual">residual<a class="anchor" aria-label="anchor" href="#arg-residual"></a></dt>
<dd><p>Minimum chlorine residual in disinfection segment in mg/L as Cl2.</p></dd>


<dt id="arg-baffle">baffle<a class="anchor" aria-label="anchor" href="#arg-baffle"></a></dt>
<dd><p>Baffle factor - unitless value between 0 and 1.</p></dd>


<dt id="arg-free-cl-slot">free_cl_slot<a class="anchor" aria-label="anchor" href="#arg-free-cl-slot"></a></dt>
<dd><p>Defaults to "residual_only", which uses the residual argument. If "slot_only", the model will use the
free_chlorine slot in the input water. "sum_with_residual", will use the sum of the residual argument and the free_chlorine slot.</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>a data frame containing a water class column, which has already been computed using <a href="define_water_df.html">define_water_df</a></p></dd>


<dt id="arg-input-water">input_water<a class="anchor" aria-label="anchor" href="#arg-input-water"></a></dt>
<dd><p>name of the column of Water class data to be used as the input for this function. Default is "defined_water".</p></dd>


<dt id="arg-water-prefix">water_prefix<a class="anchor" aria-label="anchor" href="#arg-water-prefix"></a></dt>
<dd><p>name of the input water used for the calculation will be appended to the start of output columns. Default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>solvect_chlorine</code> returns a data frame containing required CT (mg/L<em>min), actual CT (mg/L</em>min), giardia log removal, and virus log removal.</p>
<p><code>solvect_chlorine_df</code> returns a data frame containing the original data frame and columns for required CT, actual CT, and giardia log removal.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>CT actual is a function of time, chlorine residual, and baffle factor, whereas CT required is a function of
pH, temperature, chlorine residual, and the standard 0.5 log removal of giardia requirement.  CT required is an
empirical regression equation developed by Smith et al. (1995) to provide conservative estimates for CT tables
in USEPA Disinfection Profiling Guidance.
Log removal is a rearrangement of the CT equations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">example_ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="define_water.html">define_water</a></span><span class="op">(</span>ph <span class="op">=</span> <span class="fl">7.5</span>, temp <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">solvect_chlorine</span><span class="op">(</span>time <span class="op">=</span> <span class="fl">30</span>, residual <span class="op">=</span> <span class="fl">1</span>, baffle <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Missing value for alkalinity. Carbonate balance will not be calculated.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Major ions missing and neither TDS or conductivity entered. Ideal conditions will be assumed. Ionic strength will be set to NA and activity coefficients in future calculations will be set to 1.</span>
<span class="r-in"><span><span class="va">ct_calc</span> <span class="op">&lt;-</span> <span class="va">water_df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="define_water_df.html">define_water_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">solvect_chlorine_df</span><span class="op">(</span>residual <span class="op">=</span> <span class="fl">2</span>, time <span class="op">=</span> <span class="fl">10</span>, baffle <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">chlor_resid</span> <span class="op">&lt;-</span> <span class="va">water_df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>br <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="define_water_df.html">define_water_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    residual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">12</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">24</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    baffle <span class="op">=</span> <span class="fl">0.7</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">solvect_chlorine_df</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Virus log removal estimated to closest temperature in EPA Guidance Manual Table E-7</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sierra Johnson, Libby McKenna, Riley Mulhern, Chris Corwin, Brown and Caldwell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

